<header class="header w-100">
  <div
    class="container-md p-0{% if include.landingpage == 'true' %} px-5 px-lg-0{% endif %}"
  >
    <div class="row flex-nowrap m-0 header-row">
      <div
        class="col d-flex p-0 header__logo{% if include.userstate == 'signed-out' %}-logged-out{% endif %}{% if include.landingpage == 'true' %} d-md-none{% endif %}"
      >
        <!-- TODO: update this link to point to the home page -->
        <a href="index" class="d-flex">
          <img
            src="{{site.baseurl}}/assets/img/harlequin-plus-logo.svg"
            alt="Harlequin Plus Logo"
            class="d-inline-block header__logo-image"
        /></a>
      </div>

      {% if include.infopage == "true" %}
      <div class="col d-flex p-0 justify-content-end">
        {% include components/button-link.html type="rounded-transparent"
        label="Close" extraClasses="btn btn-primary btn-lg header-button
        transparent-button px-8" link="/landing" %}
      </div>

      {% elsif include.userstate == "signed-in" %}<!-- -->
      {% include nav/mobile/mobile-nav.html menu="main"
      userstate=include.userstate sub=include.sub %}<!-- -->
      {% include nav/desktop-nav.html %}

      <div
        class="col account d-flex pe-0{% if include.sub == 'true' %} me-lg-4{% endif %}"
      >
        <div class="account__inner d-flex">
          <div class="account__name d-flex align-self-center d-none d-lg-block">
            Hi, Brennan
          </div>

          <div class="dropdown account__dropdown">
            <button
              class="btn btn-default account__menu-button d-none d-lg-block{% if include.sub == 'false' %} pe-0{% endif %}"
              type="button"
              id="account-dropdown-menu"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <img
                src="{{site.baseurl}}/assets/img/icons/account.svg"
                alt="Account Icon"
              />
            </button>

            {% include nav/mobile/mobile-nav.html menu="user-account"
            userstate=include.userstate sub=include.sub %}

            <div
              class="dropdown-menu header__dropdown-menu"
              aria-labelledby="account-dropdown-menu"
            >
              <div class="header__dropdown-menu-arrow-up"></div>
              <ul class="header__dropdown-menu-list">
                {% if include.userstate == "signed-in" and include.sub == "true"
                %}
                <li class="header__dropdown-list-item">
                  <a
                    href="/selection-summary"
                    class="dropdown-item header__dropdown-item dropdown-item__selections"
                  >
                    <span class="dropdown-item__selections__number">8</span>
                    Available Selections
                  </a>
                </li>
                <li class="header__dropdown-list-item">
                  <a
                    href="/selection-summary"
                    class="dropdown-item header__dropdown-item dropdown-item__selections_summary"
                    >Selection Summary</a
                  >
                </li>
                <li class="header__dropdown-list-item">
                  <hr class="dropdown-divider header__dropdown-divider" />
                </li>
                {% endif %}<!--  -->

                {% if include.userstate == "signed-in" and include.sub == "true"
                %}<!--  -->
                {% assign accountLinks = site.data.header-account-nav %}<!--  -->
                {% elsif include.userstate == "signed-in" and include.sub ==
                "false" %}<!--  -->
                {% assign accountLinks = site.data.header-account-nav-unsubbed
                %}<!--  -->
                {% endif %}<!--  -->

                {% for item in accountLinks %}
                <li class="header__dropdown-list-item">
                  <a
                    class="dropdown-item header__dropdown-item"
                    href="{{ item.link }}"
                    >{{ item.name }}</a
                  >
                </li>
                {% endfor %}
              </ul>
            </div>
          </div>
        </div>
      </div>

      {% if include.userstate == "signed-in" and include.sub == "true" %}
      <div class="col d-flex d-none d-lg-block pe-0">
        {% include components/button-link.html label="My Bookshelf"
        extraClasses="header-button" link="/my-bookshelf" %}
      </div>
      {% endif %}<!--  -->
      {% elsif include.userstate != "logo-only" %}

      <div class="col d-flex p-0 justify-content-end">
        {% include components/button-link.html label="Sign In"
        type="rounded-transparent" extraClasses="header-button sign-in-button
        px-9" %}
      </div>
      {% endif %}
    </div>
  </div>
</header>
